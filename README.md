# PetChain
## 반려동물 건강 및 진료 기록 관리를 위한 DID 기반 블록체인 플랫폼   
- PetChain은 애완동물의 생애 이력을 관리하고 추적할 수 있는 블록체인 기반 플랫폼입니다. 이 플랫폼의 목적은 애완동물의 건강 기록, 소유권 이전, 분실 및 발견 정보 등 중요한 데이터를 안전하게 저장하고 접근 관리할 수 있도록 하는 것입니다.

<hr>

## 1. 배경 및 문제점
반려동물 가구의 급증과 함께 반려동물 의료 서비스 수요도 증가하고 있습니다. 그러나 현행 제도는 의료 분쟁 발생 시 법적 근거의 부족, 기록 관리의 소홀, 과실 판단 기준의 모호함 등의 문제를 안고 있어, 반려동물 가족들이 피해를 입는 사례가 지속되고 있습니다. 이에 반려동물 의료 분쟁 해결 및 관련 산업의 육성을 위한 제도적 기반 마련이 시급합니다.


## 2. 문제점
- **2-1.진료기록 접근성 문제:** 현재 수의사법은 의료사고 발생 시 진료기록 제출 의무를 부과하지 않아, 반려동물 보호자들이 진료기록을 확보하는 데 어려움을 겪고 있습니다. 이로 인해 진료 기록의 정확성에 대한 의심이 생길 수 있으며, 보호자는 전문성 부족으로 인해 의료 과실을 입증하기 어려운 상황에 처할 수 있습니다. 수의학의 전문 영역 특성상, 이러한 접근성 문제는 심각한 문제로 여겨집니다.   
<br>
- **2-2.진료기록 신뢰성 문제:** 현행법 상 반려동물은 물건으로 간주되어 있어, 보호자가 정신적 손해에 대한 배상을 받기 어렵습니다. 이러한 법적 지위는 반려동물에 대한 진료 기록의 신뢰성 문제에도 영향을 미치며, 진료 기록에 비현실적인 내용이 포함되어 있거나 수기로 작성되어 정확성이 보장되지 않는 경우가 있습니다. 따라서 반려동물의 법적 지위 재정립과 함께 진료기록 관리의 신뢰성 강화가 요구됩니다.   
<br>
- **2-3.의료 분쟁의 복잡성:** 반려동물을 물건으로 간주하는 현행법은 의료 분쟁 시 보호자가 적절한 보상을 받기 어렵게 만듭니다. 분쟁 금액이 소액일 경우 법원에서 기각되는 사례가 많아, 보호자의 피해 구제가 어려운 상황입니다. 또한, 수의학 분야에서 의료 과실 판단 기준이 명확하지 않아 분쟁이 발생할 경우 혼선이 발생할 수 있습니다.

### PetChain이 해결하고자 하는 문제
- 반려동물의 분실 및 도난 시 소유권 증명의 어려움
- 반려동물의 건강 및 예방접종 이력 관리의 비효율성
- 반려동물 관련 거래의 신뢰성 문제

## 3. 필요성 및 해결 방안
### 3-1. 진료기록의 디지털화 및 표준화
- **목적**: 반려동물의 진료기록을 디지털 형식으로 관리하며, 기록의 형식과 내용에 대한 표준화를 추진하여 진료기록의 정확성을 보장하고 접근성을 높입니다.
### 3-2. 진료기록 접근 권한의 명확화
- **수의사법 개정**: 반려동물 보호자에게 진료기록에 대한 접근 권한을 명확히 부여합니다. 이는 보호자의 권리로 인정되어야 하며, 투명성과 신뢰성 확보에 기여합니다.
### 3-3. 의료 분쟁 해결을 위한 전문 기구 설립
- **전문 기구 설립**: 반려동물 의료 분쟁을 전문적으로 다루는 기구를 설립하여, 분쟁 해결의 전문성과 신속성을 높입니다. 의료 과실 판단 기준을 명확히 하고, 분쟁 해결 절차를 간소화하여 보호자의 피해 구제를 용이하게 합니다.

### 해결방안
- 반려동물 의료 서비스 시장이 급성장하는 가운데, 진료기록 접근성 및 신뢰성 문제, 반려동물 법적 지위 모호성, 의료 분쟁 복잡성 등 현행 제도의 한계로 인해 보호자 피해가 지속되고 있습니다. PetChain은 이러한 문제를 해결하기 위해 블록체인 기술을 활용한 투명하고 위변조 불가능한 반려동물 정보 기록 플랫폼을 구축합니다. 블록체인 기반 기록을 통해 반려동물의 출신, 건강 상태, 백신 접종 이력 등의 정보를 보호자, 수의사, 새 주인 등과 안전하게 공유할 수 있습니다. 아울러 커뮤니티 기능을 탑재하여 보호자 간 소통과 정보 교류의 장을 제공함으로써 반려동물 의료 서비스에 대한 신뢰와 투명성을 높이고, 보호자의 권리를 보장할 수 있을 것입니다.

<hr>

## 시나리오
### 사용자 정의
- **Issuer(발급자) - 수의사협회:** 수의사협회는 병원 및 수의사 인증서를 발급합니다. 이들의 정보를 수집하여 블록체인에 등록하고, 이를 기반으로 인증서를 발급합니다.   
<br>
- **Holder(보유자) - 보호자(반려동물 주인):** 보호자는 반려동물 진료기록의 소유자로서, 병원에서 발급한 디지털 진료기록을 모바일 지갑이나 웹 서비스를 통해 접근할 수 있습니다.   
<br>
- **Verifier(검증자) - 수의사 또는 동물병원:** 진료기록의 검증자는 수의사 또는 동물병원입니다. 보호자가 진료기록을 제시하면, 해당 기관은 블록체인을 통해 보호자와 반려동물의 정보, 진료 내역을 검증할 수 있습니다.

### 진료기록 관리 시나리오
1. **수의사/병원 정보 등록:** 수의사와 병원이 수의사협회에 인증을 신청하면, 협회는 이들의 정보를 수집하고 DID를 발급합니다. 발급된 DID와 정보는 블록체인 기반의 Verifiable Data Registry(VDR)에 등록됩니다.   
<br>
2. **진료기록 발급 및 등록:** 보호자가 반려동물 진료를 받으면, 병원은 진료 정보를 바탕으로 디지털 진료기록(Verifiable Credential, VC)을 생성합니다. 이 진료기록은 보호자, 반려동물, 수의사의 DID와 연결되며 VDR에 기록됩니다.   <br>
<br>
3. **진료기록 제시 및 전달:** 보호자가 다른 병원을 방문하거나 반려동물 서비스를 이용할 때, 자신의 진료기록을 포함한 Verifiable Presentation(VP)을 생성하여 해당 기관에 제시합니다.   
<br>
4. **진료기록 검증:** 병원 또는 서비스 제공자는 제시된 VP의 정보와 VDR 내용을 비교하여 진료기록을 검증합니다. 정보가 일치하면 유효한 것으로 인정하고 서비스를 제공합니다.   
<br>
5. **기록 업데이트 및 관리:** 새 진료가 이루어지면 병원은 VDR에 최신 기록을 추가합니다. 불필요한 기존 기록은 폐기되며, 이 과정은 블록체인에 기록되어 투명하게 관리됩니다.   

<hr>

## PetChain: DID 기반 반려동물 신원 관리 시스템
### 블록체인 기술 소개
블록체인 기술은 데이터를 분산 저장함으로써 정보의 조작을 어렵게 만들고, 투명하며 안전한 정보 관리를 가능하게 합니다.
- **스마트 계약**: 애완동물 관련 거래의 자동화 및 검증
- **암호화**: 데이터 보안 및 개인정보 보호

### 주요 기능 및 서비스
- **애완동물 등록 시스템**: 애완동물의 기본 정보 및 건강 이력 관리
- **애완동물 이력 추적 기능**: 분실, 도난, 건강 기록 등의 추적
- **사용자 인터페이스 및 경험**: 직관적이고 사용자 친화적인 디자인
- **기타 부가 서비스**: 애완동물 관련 제품 및 서비스의 추천

### PetChain의 이용자
- 애완동물 소유자
- 동물 병원 및 클리닉
- 애완동물 관련 서비스 제공자

### 보안 및 개인정보 보호
- **데이터 보안 체계**: 블록체인의 불변성을 활용한 데이터 보호
- **사용자 개인정보 보호 정책**: 최소한의 개인정보 수집 및 암호화

### 반려동물 신원 관리
- 각 반려동물에게 고유한 **PetChain_did**가 부여됩니다.
- 반려동물의 **PetChain_did**는 생체정보(DNA, 마이크로칩 등)와 연결되어 진위 여부를 확인할 수 있습니다.
- 병원에서는 내원 시 반려동물의 **PetChain_did**를 통해 정확한 개체 식별이 가능합니다.

### 보호자 신원 관리
- 보호자에게도 고유한 **PetChain_did**가 발급됩니다.
- 보호자 **DID(Decentralized Identity)**와 반려동물 **PetChain_did**가 연결되어 소유 관계가 관리됩니다.

### 수의사/병원 인증
- 수의사와 병원에도 **PetChain_did**가 발급되어 신원이 보장됩니다.
- **PetChain_did**는 각 수의사나 병원의 전문성, 경력, 그리고 리뷰 등의 정보와 연결되어, 동물 보호자들이 쉽게 정보를 확인하고 선택할 수 있게 도와줍니다.
- 모든 인증 과정과 정보는 블록체인 기술을 활용하여 안전하게 관리되어, 데이터의 위변조가 불가능하며, 신뢰할 수 있는 정보만을 제공합니다.

### DID 기반 진료기록 관리
- 진료기록은 반려동물 **PetChain_did**와 연결된 **VC(Verifiable Credential)** 형태로 발급됩니다.
- 보호자는 자신의 **DID(Decentralized Identity)**로 반려동물의 진료기록 **VC**에 접근할 수 있습니다.
- 다른 병원에서는 **VP(Verifiable Presentation)**를 통해 해당 정보를 검증할 수 있습니다.

<hr>

## VC & VP 정의
### VC 정의
- NAME: Pet Medical Record
- ISSUER: National Veterinary Association (가상의 발급 기관)
- TYPE: ["VerifiableCredential", "PetMedicalRecord"]
- CLAIMS:
    - ownerName: 시나 (보호자 이름)
    - ownerBirth: 1987-11-01 (보호자 생년월일)
    - petName: 해피 (반려동물 이름)
    - petType: 개 (반려동물 종류)
    - petBirth: 2024-05-05 (반려동물 생년월일)
    - diagnosis: 피부병 (진단명)
    - treatment: 연고 바르기 (치료 내용)
    - hospitalName: 강북동물병원 (진료 병원명)
    - recordID: DID:(timestamp):987654321abcdefg (기록 고유 ID)

### VP 정의
- NAME: 'Pet Medical Record Presentation'
- CONTEXT: '다른 동물병원 방문 시 과거 진료기록 제시'
- TYPE: ["VerifiablePresentation", "PetMedicalPresentation"]
- VERIFIABLE CREDENTIAL: Pet Medical Record VC
- HOLDER: DID:(timestamp):123456789hgfedcba (VC 소유자 식별자)

<hr>

### 추가로 고려 해야 할 정보:

1. **보호자 및 반려동물의 생체 정보:**
    - 반려동물의 DNA 정보, 마이크로칩 번호 등 생체정보와 보호자의 생체 인증 정보(지문, 홍채 등)를 수집하여 보다 안전한 신원 확인 및 연결이 가능합니다.
2. **법적 규정 및 준수 정보:**
    - 다양한 국가 또는 지역의 법적 규정에 따라 반려동물의 신원 관리 및 개인정보 보호에 관한 규정을 준수해야 합니다. 이에 대한 정보 수집이 필요합니다.
3. **보호자의 연락처 및 비상 연락 정보:**
    - 비상 상황 발생 시 신속한 연락을 위해 보호자의 연락처 및 대체 연락처 정보가 필요합니다.

### 추가로 구축해야 할 정보 및 시스템 요소:

1. **생체 정보 기반 인증 시스템:**
    - 생체 정보를 통한 보호자 및 반려동물의 신원 인증 시스템을 구축해야 합니다. 이는 더욱 안전한 인증 방법을 제공합니다.
2. **법적 준수 및 개인정보 보호 시스템:**
    - 각국의 법적 규정 및 개인정보 보호 정책에 맞추어 시스템을 구축하고, 사용자의 데이터 보호를 위한 암호화 및 접근 권한 관리 기능이 필요합니다.
3. **교차 검증 시스템:**
    - 다른 병원이나 서비스 제공자가 반려동물의 진료기록이나 신원을 검증할 수 있는 교차 검증 시스템. 예를 들어, QR 코드 스캔을 통해 정보를 확인하거나, DID 기반의 안전한 정보 공유 및 검증 프로토콜을 개발해야 합니다.
4. **사용자 피드백 및 리뷰 시스템:**
    - 수의사나 병원에 대한 리뷰 및 평가 정보를 투명하게 관리하고 제공하는 시스템. 사용자들이 신뢰할 수 있는 서비스를 선택할 수 있도록 돕습니다.

<hr>

## 스마트 컨트랙트 빌드 및 배포
- 모듈 설치: `npm install`
- 빌드: `npm run build`
- 로컬 배포: `npm run deploy-local`
- MINA 메인넷 배포: `npm run deploy-mainnet`

## Block Explorer
- 네트워크: 이더리움 테스트 넷
- URL: <https://goerli.etherscan.io/>
- 검증: <https://goerli.etherscan.io/>

